{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "docs/mcp/schema/v1/tools.schema.json",
  "title": "MCP Tool Schemas",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "search_code_semantic": { "$ref": "#/$defs/SearchTool" },
    "search_code_lexical": { "$ref": "#/$defs/SearchTool" },
    "search_code_hybrid": { "$ref": "#/$defs/SearchTool" },
    "search_by_signature": { "$ref": "#/$defs/SearchBySignatureTool" },
    "find_similar_code": { "$ref": "#/$defs/SimilarCodeTool" },
    "get_symbol_definition": { "$ref": "#/$defs/SymbolDefinitionTool" },
    "find_callers": { "$ref": "#/$defs/CallGraphTool" },
    "find_callees": { "$ref": "#/$defs/CallGraphTool" },
    "find_implementations": { "$ref": "#/$defs/ImplementationsTool" },
    "find_type_definition": { "$ref": "#/$defs/TypeDefinitionTool" },
    "inheritance_tree": { "$ref": "#/$defs/InheritanceTool" },
    "dependency_graph": { "$ref": "#/$defs/DependencyTool" },
    "impact_analysis": { "$ref": "#/$defs/ImpactTool" },
    "get_symbol_hierarchy": { "$ref": "#/$defs/SymbolHierarchyTool" },
    "find_tests_for_symbol": { "$ref": "#/$defs/TestsForSymbolTool" },
    "generate_tests": { "$ref": "#/$defs/GenerateTestsTool" },
    "get_recent_changes": { "$ref": "#/$defs/RecentChangesTool" },
    "explain_code_context": { "$ref": "#/$defs/ExplainCodeContextTool" },
    "explain_code": { "$ref": "#/$defs/ExplainCodeTool" },
    "export_code_graph": { "$ref": "#/$defs/ExportGraphTool" },
    "export_call_graph": { "$ref": "#/$defs/ExportCallGraphTool" },
    "get_project_conventions": { "$ref": "#/$defs/GetProjectConventionsTool" },
    "register_repository": { "$ref": "#/$defs/RegisterRepoTool" },
    "unregister_repository": { "$ref": "#/$defs/UnregisterRepoTool" },
    "trigger_reindex": { "$ref": "#/$defs/TriggerReindexTool" },
    "get_index_status": { "$ref": "#/$defs/GetIndexStatusTool" },
    "get_bootstrap_status": { "$ref": "#/$defs/GetBootstrapStatusTool" },
    "system_health": { "$ref": "#/$defs/SystemHealthTool" },
    "validate_input": { "$ref": "#/$defs/ValidateInputTool" },
    "get_audit_events": { "$ref": "#/$defs/GetAuditEventsTool" },
    "provide_feedback": { "$ref": "#/$defs/ProvideFeedbackTool" },
    "add_memory": { "$ref": "#/$defs/AddMemoryTool" },
    "search_memories": { "$ref": "#/$defs/SearchMemoriesTool" },
    "update_memory": { "$ref": "#/$defs/UpdateMemoryTool" },
    "delete_memory": { "$ref": "#/$defs/DeleteMemoryTool" },
    "create_adr": { "$ref": "#/$defs/CreateAdrTool" },
    "update_adr": { "$ref": "#/$defs/UpdateAdrTool" },
    "search_adr": { "$ref": "#/$defs/SearchAdrTool" },
    "list_adr": { "$ref": "#/$defs/ListAdrTool" },
    "get_adr_by_id": { "$ref": "#/$defs/GetAdrByIdTool" },
    "find_recurring_patterns": { "$ref": "#/$defs/FindRecurringPatternsTool" },
    "detect_code_smells": { "$ref": "#/$defs/DetectCodeSmellsTool" },
    "get_similar_past_issues": { "$ref": "#/$defs/GetSimilarPastIssuesTool" },
    "get_test_coverage": { "$ref": "#/$defs/GetTestCoverageTool" },
    "analyze_pull_request": { "$ref": "#/$defs/AnalyzePullRequestTool" },
    "suggest_review_comments": { "$ref": "#/$defs/SuggestReviewCommentsTool" }
  },
  "$defs": {
    "EmptyInput": {
      "type": "object",
      "additionalProperties": false
    },
    "RepoRef": {
      "type": "object",
      "properties": {
        "repo_id": { "type": "string", "minLength": 1 }
      },
      "required": ["repo_id"],
      "additionalProperties": false
    },
    "ScopeFilter": {
      "type": "object",
      "properties": {
        "scope": {
          "type": "string",
          "enum": ["session", "user", "team", "project", "org", "enterprise"]
        },
        "org_id": { "type": "string" },
        "enterprise_id": { "type": "string" },
        "project_id": { "type": "string" },
        "team_id": { "type": "string" },
        "user_id": { "type": "string" },
        "geo_scope": { "type": "string" }
      },
      "additionalProperties": false
    },
    "Pagination": {
      "type": "object",
      "properties": {
        "limit": { "type": "integer", "minimum": 1, "maximum": 100 },
        "offset": { "type": "integer", "minimum": 0 }
      },
      "additionalProperties": false
    },
    "CursorPagination": {
      "type": "object",
      "properties": {
        "limit": { "type": "integer", "minimum": 1, "maximum": 100 },
        "cursor": { "type": "string" }
      },
      "additionalProperties": false
    },
    "CodeLocation": {
      "type": "object",
      "properties": {
        "file_path": { "type": "string" },
        "line_start": { "type": "integer", "minimum": 1 },
        "line_end": { "type": "integer", "minimum": 1 }
      },
      "required": ["file_path"],
      "additionalProperties": false
    },
    "CodeSymbol": {
      "type": "object",
      "properties": {
        "symbol_id": { "type": "string" },
        "symbol_name": { "type": "string" },
        "symbol_type": { "type": "string" },
        "signature": { "type": "string" },
        "language": { "type": "string" },
        "location": { "$ref": "#/$defs/CodeLocation" }
      },
      "required": ["symbol_name", "symbol_type"],
      "additionalProperties": false
    },
    "CodeHit": {
      "type": "object",
      "properties": {
        "symbol": { "$ref": "#/$defs/CodeSymbol" },
        "score": { "type": "number" },
        "snippet": { "type": "string" },
        "source": { "type": "string", "enum": ["vector", "lexical", "graph", "hybrid"] },
        "repo_id": { "type": "string" }
      },
      "required": ["symbol", "score", "source"],
      "additionalProperties": false
    },
    "GraphNode": {
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "type": { "type": "string" },
        "properties": { "type": "object" }
      },
      "required": ["id", "type"],
      "additionalProperties": false
    },
    "GraphEdge": {
      "type": "object",
      "properties": {
        "from": { "type": "string" },
        "to": { "type": "string" },
        "type": { "type": "string" },
        "confidence": { "type": "string", "enum": ["definite", "probable", "possible"] },
        "properties": { "type": "object" }
      },
      "required": ["from", "to", "type"],
      "additionalProperties": false
    },
    "ResponseMeta": {
      "type": "object",
      "properties": {
        "request_id": { "type": "string" },
        "degraded_mode": { "type": "boolean" },
        "missing_sources": {
          "type": "array",
          "items": { "type": "string", "enum": ["vector", "lexical", "graph"] }
        },
        "confidence_adjustment": { "type": "number" },
        "next_cursor": { "type": "string" }
      },
      "required": ["request_id"],
      "additionalProperties": false
    },
    "SearchInput": {
      "type": "object",
      "properties": {
        "query": { "type": "string", "minLength": 1 },
        "repo_id": { "type": "string" },
        "language": { "type": "string" },
        "scope": { "$ref": "#/$defs/ScopeFilter" },
        "pagination": { "$ref": "#/$defs/Pagination" },
        "cursor_pagination": { "$ref": "#/$defs/CursorPagination" }
      },
      "required": ["query"],
      "additionalProperties": false
    },
    "SearchOutput": {
      "type": "object",
      "properties": {
        "results": { "type": "array", "items": { "$ref": "#/$defs/CodeHit" } },
        "next_cursor": { "type": "string" },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["results", "meta"],
      "additionalProperties": false
    },
    "SearchTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/SearchInput" },
        "output": { "$ref": "#/$defs/SearchOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "SignatureSearchInput": {
      "type": "object",
      "properties": {
        "signature": { "type": "string", "minLength": 1 },
        "repo_id": { "type": "string" },
        "language": { "type": "string" },
        "pagination": { "$ref": "#/$defs/Pagination" }
      },
      "required": ["signature"],
      "additionalProperties": false
    },
    "SearchBySignatureTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/SignatureSearchInput" },
        "output": { "$ref": "#/$defs/SearchOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "SimilarCodeInput": {
      "type": "object",
      "properties": {
        "code": { "type": "string", "minLength": 1 },
        "repo_id": { "type": "string" },
        "language": { "type": "string" },
        "pagination": { "$ref": "#/$defs/Pagination" }
      },
      "required": ["code"],
      "additionalProperties": false
    },
    "SimilarCodeTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/SimilarCodeInput" },
        "output": { "$ref": "#/$defs/SearchOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "SymbolLookupInput": {
      "type": "object",
      "properties": {
        "symbol_id": { "type": "string" },
        "symbol_name": { "type": "string" },
        "file_path": { "type": "string" },
        "repo_id": { "type": "string" }
      },
      "anyOf": [
        { "required": ["symbol_id"] },
        { "required": ["symbol_name"] }
      ],
      "additionalProperties": false
    },
    "SymbolDefinitionOutput": {
      "type": "object",
      "properties": {
        "symbol": { "$ref": "#/$defs/CodeSymbol" },
        "snippet": { "type": "string" },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["symbol", "meta"],
      "additionalProperties": false
    },
    "SymbolDefinitionTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/SymbolLookupInput" },
        "output": { "$ref": "#/$defs/SymbolDefinitionOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "GraphOutput": {
      "type": "object",
      "properties": {
        "nodes": { "type": "array", "items": { "$ref": "#/$defs/GraphNode" } },
        "edges": { "type": "array", "items": { "$ref": "#/$defs/GraphEdge" } },
        "next_cursor": { "type": "string" },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["nodes", "edges", "meta"],
      "additionalProperties": false
    },
    "CallGraphInput": {
      "type": "object",
      "properties": {
        "symbol_id": { "type": "string" },
        "symbol_name": { "type": "string" },
        "repo_id": { "type": "string" },
        "depth": { "type": "integer", "minimum": 1, "maximum": 5 }
      },
      "anyOf": [
        { "required": ["symbol_id"] },
        { "required": ["symbol_name"] }
      ],
      "required": ["repo_id"],
      "additionalProperties": false
    },
    "CallGraphTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/CallGraphInput" },
        "output": { "$ref": "#/$defs/GraphOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "ImplementationsTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/SymbolLookupInput" },
        "output": { "$ref": "#/$defs/GraphOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "TypeDefinitionTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/SymbolLookupInput" },
        "output": { "$ref": "#/$defs/GraphOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "InheritanceInput": {
      "type": "object",
      "properties": {
        "class_name": { "type": "string" },
        "repo_id": { "type": "string" },
        "depth": { "type": "integer", "minimum": 1, "maximum": 5 }
      },
      "required": ["class_name", "repo_id"],
      "additionalProperties": false
    },
    "InheritanceTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/InheritanceInput" },
        "output": { "$ref": "#/$defs/GraphOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "DependencyInput": {
      "type": "object",
      "properties": {
        "file_path": { "type": "string" },
        "repo_id": { "type": "string" },
        "depth": { "type": "integer", "minimum": 1, "maximum": 5 }
      },
      "required": ["file_path", "repo_id"],
      "additionalProperties": false
    },
    "DependencyTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/DependencyInput" },
        "output": { "$ref": "#/$defs/GraphOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "ImpactInput": {
      "type": "object",
      "properties": {
        "repo_id": { "type": "string" },
        "changed_files": { "type": "array", "items": { "type": "string" } },
        "symbol_id": { "type": "string" },
        "include_cross_language": { "type": "boolean" },
        "max_depth": { "type": "integer", "minimum": 1, "maximum": 10 },
        "confidence_threshold": {
          "type": "string",
          "enum": ["definite", "probable", "possible"]
        }
      },
      "anyOf": [
        { "required": ["changed_files"] },
        { "required": ["symbol_id"] }
      ],
      "required": ["repo_id"],
      "additionalProperties": false
    },
    "ImpactOutput": {
      "type": "object",
      "properties": {
        "affected_files": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "file_path": { "type": "string" },
              "reason": { "type": "string" },
              "confidence": { "type": "number" }
            },
            "required": ["file_path", "reason", "confidence"],
            "additionalProperties": false
          }
        },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["affected_files", "meta"],
      "additionalProperties": false
    },
    "ImpactTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/ImpactInput" },
        "output": { "$ref": "#/$defs/ImpactOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "SymbolHierarchyInput": {
      "type": "object",
      "properties": {
        "repo_id": { "type": "string" },
        "path_prefix": { "type": "string" },
        "language": { "type": "string" },
        "cursor_pagination": { "$ref": "#/$defs/CursorPagination" }
      },
      "required": ["repo_id"],
      "additionalProperties": false
    },
    "SymbolHierarchyTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/SymbolHierarchyInput" },
        "output": { "$ref": "#/$defs/GraphOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "TestsForSymbolTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/SymbolLookupInput" },
        "output": { "$ref": "#/$defs/SearchOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "RecentChangesInput": {
      "type": "object",
      "properties": {
        "repo_id": { "type": "string" },
        "path_prefix": { "type": "string" },
        "since": { "type": "string", "format": "date-time" },
        "until": { "type": "string", "format": "date-time" },
        "pagination": { "$ref": "#/$defs/Pagination" }
      },
      "required": ["repo_id"],
      "additionalProperties": false
    },
    "RecentChangesOutput": {
      "type": "object",
      "properties": {
        "changes": { "type": "array", "items": { "type": "object" } },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["changes", "meta"],
      "additionalProperties": false
    },
    "RecentChangesTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/RecentChangesInput" },
        "output": { "$ref": "#/$defs/RecentChangesOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "ExplainCodeContextInput": {
      "type": "object",
      "properties": {
        "symbol_id": { "type": "string" },
        "file_path": { "type": "string" },
        "repo_id": { "type": "string" }
      },
      "anyOf": [
        { "required": ["symbol_id"] },
        { "required": ["file_path"] }
      ],
      "required": ["repo_id"],
      "additionalProperties": false
    },
    "ExplainCodeContextOutput": {
      "type": "object",
      "properties": {
        "summary": { "type": "string" },
        "related_symbols": { "type": "array", "items": { "$ref": "#/$defs/CodeSymbol" } },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["summary", "meta"],
      "additionalProperties": false
    },
    "ExplainCodeContextTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/ExplainCodeContextInput" },
        "output": { "$ref": "#/$defs/ExplainCodeContextOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "ExplainCodeInput": {
      "type": "object",
      "properties": {
        "symbol_id": {
          "type": "string",
          "description": "SCIP symbol ID (e.g., 'scip-python myapp module/Class#method.')"
        },
        "config": { "$ref": "#/$defs/ExplainCodeConfig" }
      },
      "required": ["symbol_id"],
      "additionalProperties": false
    },
    "ExplainCodeConfig": {
      "type": "object",
      "properties": {
        "depth": {
          "type": "integer",
          "minimum": 1,
          "maximum": 5,
          "default": 2,
          "description": "Call graph traversal depth"
        },
        "include_callers": {
          "type": "boolean",
          "default": true,
          "description": "Include functions that call this symbol"
        },
        "include_callees": {
          "type": "boolean",
          "default": true,
          "description": "Include functions this symbol calls"
        },
        "include_usages": {
          "type": "boolean",
          "default": true,
          "description": "Include usage examples from codebase"
        },
        "max_usages": {
          "type": "integer",
          "minimum": 0,
          "maximum": 20,
          "default": 5,
          "description": "Maximum usage examples to return"
        },
        "include_related": {
          "type": "boolean",
          "default": true,
          "description": "Include related symbols"
        },
        "max_related": {
          "type": "integer",
          "minimum": 0,
          "maximum": 50,
          "default": 10,
          "description": "Maximum related symbols to return"
        },
        "format": {
          "type": "string",
          "enum": ["json", "markdown", "llm"],
          "default": "llm",
          "description": "Output format"
        }
      },
      "additionalProperties": false
    },
    "CallGraphEntry": {
      "type": "object",
      "properties": {
        "symbol_id": { "type": "string" },
        "name": { "type": "string" },
        "kind": { "type": "string" },
        "file_path": { "type": "string" },
        "line_start": { "type": "integer", "minimum": 1 },
        "depth": { "type": "integer", "minimum": 1 },
        "call_line": { "type": "integer", "minimum": 1 },
        "call_col": { "type": "integer", "minimum": 0 }
      },
      "required": ["symbol_id", "name"],
      "additionalProperties": false
    },
    "UsageExample": {
      "type": "object",
      "properties": {
        "code": { "type": "string" },
        "file": { "type": "string" },
        "score": { "type": "number" }
      },
      "required": ["code"],
      "additionalProperties": false
    },
    "RelatedSymbol": {
      "type": "object",
      "properties": {
        "symbol_id": { "type": "string" },
        "name": { "type": "string" },
        "kind": { "type": "string" },
        "file_path": { "type": "string" },
        "score": { "type": "number" }
      },
      "required": ["symbol_id", "name"],
      "additionalProperties": false
    },
    "SymbolExplanation": {
      "type": "object",
      "properties": {
        "symbol_id": { "type": "string" },
        "name": { "type": "string" },
        "kind": { "type": "string" },
        "signature": { "type": "string" },
        "file_path": { "type": "string" },
        "line_start": { "type": "integer", "minimum": 1 },
        "line_end": { "type": "integer", "minimum": 1 },
        "docstring": { "type": "string" },
        "callers": {
          "type": "array",
          "items": { "$ref": "#/$defs/CallGraphEntry" }
        },
        "callees": {
          "type": "array",
          "items": { "$ref": "#/$defs/CallGraphEntry" }
        },
        "usages": {
          "type": "array",
          "items": { "$ref": "#/$defs/UsageExample" }
        },
        "related": {
          "type": "array",
          "items": { "$ref": "#/$defs/RelatedSymbol" }
        },
        "context": { "type": "string" }
      },
      "required": ["symbol_id", "name", "kind", "signature", "file_path", "line_start", "line_end"],
      "additionalProperties": false
    },
    "ExplainCodeOutput": {
      "type": "object",
      "properties": {
        "explanation": { "$ref": "#/$defs/SymbolExplanation" },
        "formatted": {
          "type": "string",
          "description": "Formatted output in requested format (json/markdown/llm)"
        },
        "cached": {
          "type": "boolean",
          "description": "Whether result was retrieved from cache"
        },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["explanation", "meta"],
      "additionalProperties": false
    },
    "ExplainCodeTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/ExplainCodeInput" },
        "output": { "$ref": "#/$defs/ExplainCodeOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "ExportGraphInput": {
      "type": "object",
      "properties": {
        "repo_id": { "type": "string" },
        "format": { "type": "string", "enum": ["json", "graphml"] }
      },
      "required": ["repo_id", "format"],
      "additionalProperties": false
    },
    "ExportCallGraphInput": {
      "type": "object",
      "properties": {
        "repo_id": { "type": "string" },
        "symbol_id": { "type": "string" },
        "symbol_name": { "type": "string" },
        "depth": { "type": "integer", "minimum": 1, "maximum": 5 },
        "format": { "type": "string", "enum": ["json", "graphml"] }
      },
      "anyOf": [
        { "required": ["symbol_id"] },
        { "required": ["symbol_name"] }
      ],
      "required": ["repo_id", "format"],
      "additionalProperties": false
    },
    "ExportGraphOutput": {
      "type": "object",
      "properties": {
        "format": { "type": "string" },
        "data": { "type": "string" },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["format", "data", "meta"],
      "additionalProperties": false
    },
    "ExportGraphTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/ExportGraphInput" },
        "output": { "$ref": "#/$defs/ExportGraphOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "ExportCallGraphTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/ExportCallGraphInput" },
        "output": { "$ref": "#/$defs/ExportGraphOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "ProjectConventionsInput": {
      "type": "object",
      "properties": {
        "repo_id": { "type": "string" }
      },
      "additionalProperties": false
    },
    "ProjectConventionsOutput": {
      "type": "object",
      "properties": {
        "agents_md": { "type": "string" },
        "claude_md": { "type": "string" },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["meta"],
      "additionalProperties": false
    },
    "GetProjectConventionsTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/ProjectConventionsInput" },
        "output": { "$ref": "#/$defs/ProjectConventionsOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "RegisterRepoInput": {
      "type": "object",
      "properties": {
        "repo_name": { "type": "string" },
        "root_path": { "type": "string" },
        "default_branch": { "type": "string" },
        "languages": { "type": "array", "items": { "type": "string" } }
      },
      "required": ["repo_name", "root_path"],
      "additionalProperties": false
    },
    "RepoStatusOutput": {
      "type": "object",
      "properties": {
        "repo_id": { "type": "string" },
        "status": { "type": "string" },
        "message": { "type": "string" }
      },
      "required": ["status"],
      "additionalProperties": false
    },
    "RegisterRepoTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/RegisterRepoInput" },
        "output": { "$ref": "#/$defs/RepoStatusOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "UnregisterRepoTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/RepoRef" },
        "output": { "$ref": "#/$defs/RepoStatusOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "TriggerReindexInput": {
      "type": "object",
      "properties": {
        "repo_id": { "type": "string" },
        "mode": { "type": "string", "enum": ["full", "incremental"] }
      },
      "required": ["repo_id"],
      "additionalProperties": false
    },
    "TriggerReindexTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/TriggerReindexInput" },
        "output": { "$ref": "#/$defs/RepoStatusOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "IndexStatusOutput": {
      "type": "object",
      "properties": {
        "status": { "type": "string" },
        "last_indexed_at": { "type": "string", "format": "date-time" },
        "error_count": { "type": "integer", "minimum": 0 }
      },
      "required": ["status"],
      "additionalProperties": false
    },
    "GetIndexStatusTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/RepoRef" },
        "output": { "$ref": "#/$defs/IndexStatusOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "SystemHealthOutput": {
      "type": "object",
      "properties": {
        "status": { "type": "string", "enum": ["ok", "degraded", "error"] },
        "services": { "type": "object" }
      },
      "required": ["status", "services"],
      "additionalProperties": false
    },
    "SystemHealthTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/EmptyInput" },
        "output": { "$ref": "#/$defs/SystemHealthOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "ValidateInputInput": {
      "type": "object",
      "properties": {
        "text": { "type": "string" },
        "context": { "type": "string" }
      },
      "required": ["text"],
      "additionalProperties": false
    },
    "ValidateInputOutput": {
      "type": "object",
      "properties": {
        "risk_score": { "type": "number" },
        "findings": { "type": "array", "items": { "type": "string" } },
        "allowed": { "type": "boolean" }
      },
      "required": ["risk_score", "allowed"],
      "additionalProperties": false
    },
    "ValidateInputTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/ValidateInputInput" },
        "output": { "$ref": "#/$defs/ValidateInputOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "AuditEventsInput": {
      "type": "object",
      "properties": {
        "since": { "type": "string", "format": "date-time" },
        "until": { "type": "string", "format": "date-time" },
        "cursor_pagination": { "$ref": "#/$defs/CursorPagination" }
      },
      "additionalProperties": false
    },
    "AuditEventsOutput": {
      "type": "object",
      "properties": {
        "events": { "type": "array", "items": { "type": "object" } },
        "next_cursor": { "type": "string" },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["events", "meta"],
      "additionalProperties": false
    },
    "GetAuditEventsTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/AuditEventsInput" },
        "output": { "$ref": "#/$defs/AuditEventsOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "AddMemoryInput": {
      "type": "object",
      "properties": {
        "text": { "type": "string" },
        "scope": { "$ref": "#/$defs/ScopeFilter" },
        "metadata": { "type": "object" }
      },
      "required": ["text"],
      "additionalProperties": false
    },
    "MemoryIdOutput": {
      "type": "object",
      "properties": {
        "memory_id": { "type": "string" },
        "status": { "type": "string" }
      },
      "required": ["memory_id"],
      "additionalProperties": false
    },
    "AddMemoryTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/AddMemoryInput" },
        "output": { "$ref": "#/$defs/MemoryIdOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "SearchMemoriesInput": {
      "type": "object",
      "properties": {
        "query": { "type": "string" },
        "scope": { "$ref": "#/$defs/ScopeFilter" },
        "pagination": { "$ref": "#/$defs/Pagination" }
      },
      "required": ["query"],
      "additionalProperties": false
    },
    "SearchMemoriesOutput": {
      "type": "object",
      "properties": {
        "results": { "type": "array", "items": { "type": "object" } },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["results", "meta"],
      "additionalProperties": false
    },
    "SearchMemoriesTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/SearchMemoriesInput" },
        "output": { "$ref": "#/$defs/SearchMemoriesOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "UpdateMemoryInput": {
      "type": "object",
      "properties": {
        "memory_id": { "type": "string" },
        "text": { "type": "string" },
        "metadata": { "type": "object" }
      },
      "required": ["memory_id"],
      "additionalProperties": false
    },
    "DeleteMemoryInput": {
      "type": "object",
      "properties": {
        "memory_id": { "type": "string" }
      },
      "required": ["memory_id"],
      "additionalProperties": false
    },
    "UpdateMemoryTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/UpdateMemoryInput" },
        "output": { "$ref": "#/$defs/RepoStatusOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "DeleteMemoryTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/DeleteMemoryInput" },
        "output": { "$ref": "#/$defs/RepoStatusOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "CreateAdrInput": {
      "type": "object",
      "properties": {
        "title": { "type": "string" },
        "status": { "type": "string", "enum": ["proposed", "accepted", "deprecated"] },
        "context": { "type": "string" },
        "decision": { "type": "string" },
        "consequences": { "type": "array", "items": { "type": "string" } },
        "related_code": { "type": "array", "items": { "type": "string" } },
        "scope": { "$ref": "#/$defs/ScopeFilter" }
      },
      "required": ["title", "status", "decision"],
      "additionalProperties": false
    },
    "AdrIdOutput": {
      "type": "object",
      "properties": {
        "adr_id": { "type": "string" },
        "status": { "type": "string" }
      },
      "required": ["adr_id"],
      "additionalProperties": false
    },
    "CreateAdrTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/CreateAdrInput" },
        "output": { "$ref": "#/$defs/AdrIdOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "UpdateAdrInput": {
      "type": "object",
      "properties": {
        "adr_id": { "type": "string" },
        "title": { "type": "string" },
        "status": { "type": "string", "enum": ["proposed", "accepted", "deprecated"] },
        "context": { "type": "string" },
        "decision": { "type": "string" },
        "consequences": { "type": "array", "items": { "type": "string" } },
        "related_code": { "type": "array", "items": { "type": "string" } }
      },
      "required": ["adr_id"],
      "additionalProperties": false
    },
    "UpdateAdrTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/UpdateAdrInput" },
        "output": { "$ref": "#/$defs/AdrIdOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "SearchAdrInput": {
      "type": "object",
      "properties": {
        "query": { "type": "string" },
        "scope": { "$ref": "#/$defs/ScopeFilter" },
        "pagination": { "$ref": "#/$defs/Pagination" }
      },
      "required": ["query"],
      "additionalProperties": false
    },
    "AdrSearchOutput": {
      "type": "object",
      "properties": {
        "results": { "type": "array", "items": { "type": "object" } },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["results", "meta"],
      "additionalProperties": false
    },
    "SearchAdrTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/SearchAdrInput" },
        "output": { "$ref": "#/$defs/AdrSearchOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "ListAdrTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/ScopeFilter" },
        "output": { "$ref": "#/$defs/AdrSearchOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "GetAdrByIdInput": {
      "type": "object",
      "properties": {
        "adr_id": { "type": "string" }
      },
      "required": ["adr_id"],
      "additionalProperties": false
    },
    "AdrOutput": {
      "type": "object",
      "properties": {
        "adr": { "type": "object" },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["adr", "meta"],
      "additionalProperties": false
    },
    "GetAdrByIdTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/GetAdrByIdInput" },
        "output": { "$ref": "#/$defs/AdrOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "FindRecurringPatternsInput": {
      "type": "object",
      "properties": {
        "repo_id": { "type": "string" },
        "scope": { "$ref": "#/$defs/ScopeFilter" },
        "pagination": { "$ref": "#/$defs/Pagination" }
      },
      "required": ["repo_id"],
      "additionalProperties": false
    },
    "FindRecurringPatternsOutput": {
      "type": "object",
      "properties": {
        "patterns": { "type": "array", "items": { "type": "object" } },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["patterns", "meta"],
      "additionalProperties": false
    },
    "FindRecurringPatternsTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/FindRecurringPatternsInput" },
        "output": { "$ref": "#/$defs/FindRecurringPatternsOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "DetectCodeSmellsInput": {
      "type": "object",
      "properties": {
        "repo_id": { "type": "string" },
        "files": { "type": "array", "items": { "type": "string" } },
        "pagination": { "$ref": "#/$defs/Pagination" }
      },
      "required": ["repo_id"],
      "additionalProperties": false
    },
    "DetectCodeSmellsOutput": {
      "type": "object",
      "properties": {
        "issues": { "type": "array", "items": { "type": "object" } },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["issues", "meta"],
      "additionalProperties": false
    },
    "DetectCodeSmellsTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/DetectCodeSmellsInput" },
        "output": { "$ref": "#/$defs/DetectCodeSmellsOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "TestCoverageInput": {
      "type": "object",
      "properties": {
        "repo_id": { "type": "string" },
        "path_prefix": { "type": "string" }
      },
      "required": ["repo_id"],
      "additionalProperties": false
    },
    "TestCoverageOutput": {
      "type": "object",
      "properties": {
        "coverage_percent": { "type": "number" },
        "covered_files": { "type": "array", "items": { "type": "string" } },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["coverage_percent", "meta"],
      "additionalProperties": false
    },
    "GetTestCoverageTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/TestCoverageInput" },
        "output": { "$ref": "#/$defs/TestCoverageOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "GenerateTestsInput": {
      "type": "object",
      "properties": {
        "symbol_id": { "type": "string" },
        "symbol_name": { "type": "string" },
        "repo_id": { "type": "string" },
        "options": {
          "type": "object",
          "properties": {
            "framework": { "type": "string" },
            "style": { "type": "string", "enum": ["unit", "integration", "e2e"] },
            "coverage_target": {
              "type": "string",
              "enum": ["happy_path", "edge_cases", "comprehensive"]
            },
            "auto_mock": { "type": "boolean" },
            "use_team_patterns": { "type": "boolean" }
          },
          "additionalProperties": false
        }
      },
      "anyOf": [
        { "required": ["symbol_id"] },
        { "required": ["symbol_name"] }
      ],
      "additionalProperties": false
    },
    "GenerateTestsOutput": {
      "type": "object",
      "properties": {
        "tests": { "type": "array", "items": { "type": "object" } },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["tests", "meta"],
      "additionalProperties": false
    },
    "GenerateTestsTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/GenerateTestsInput" },
        "output": { "$ref": "#/$defs/GenerateTestsOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "ProvideFeedbackInput": {
      "type": "object",
      "properties": {
        "query_id": { "type": "string" },
        "rating": {
          "type": "string",
          "enum": ["helpful", "not_helpful", "wrong", "incomplete"]
        },
        "details": { "type": "object" }
      },
      "required": ["query_id", "rating"],
      "additionalProperties": false
    },
    "ProvideFeedbackOutput": {
      "type": "object",
      "properties": {
        "received": { "type": "boolean" },
        "follow_up_question": { "type": "string" },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["received", "meta"],
      "additionalProperties": false
    },
    "ProvideFeedbackTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/ProvideFeedbackInput" },
        "output": { "$ref": "#/$defs/ProvideFeedbackOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "GetBootstrapStatusInput": {
      "type": "object",
      "properties": {
        "repo_id": { "type": "string" }
      },
      "required": ["repo_id"],
      "additionalProperties": false
    },
    "GetBootstrapStatusOutput": {
      "type": "object",
      "properties": {
        "phase": { "type": "string" },
        "progress": {
          "type": "object",
          "properties": {
            "files_indexed": { "type": "integer", "minimum": 0 },
            "files_total": { "type": "integer", "minimum": 0 },
            "percentage": { "type": "number", "minimum": 0, "maximum": 100 }
          },
          "required": ["files_indexed", "files_total", "percentage"],
          "additionalProperties": false
        },
        "capabilities": {
          "type": "object",
          "properties": {
            "lexical_search": { "type": "boolean" },
            "semantic_search": { "type": "boolean" },
            "graph_queries": { "type": "boolean" },
            "impact_analysis": { "type": "boolean" }
          },
          "required": [
            "lexical_search",
            "semantic_search",
            "graph_queries",
            "impact_analysis"
          ],
          "additionalProperties": false
        },
        "eta_seconds": { "type": "integer", "minimum": 0 },
        "degraded_features": { "type": "array", "items": { "type": "string" } },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["phase", "progress", "capabilities", "meta"],
      "additionalProperties": false
    },
    "GetBootstrapStatusTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/GetBootstrapStatusInput" },
        "output": { "$ref": "#/$defs/GetBootstrapStatusOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "PullRequestReference": {
      "type": "object",
      "properties": {
        "provider": {
          "type": "string",
          "enum": ["github", "gitlab", "bitbucket"]
        },
        "repo": { "type": "string" },
        "pr_number": { "type": "integer", "minimum": 1 },
        "diff": { "type": "string" }
      },
      "anyOf": [
        { "required": ["provider", "repo", "pr_number"] },
        { "required": ["diff"] }
      ],
      "additionalProperties": false
    },
    "AnalyzePullRequestInput": {
      "type": "object",
      "properties": {
        "pr_reference": { "$ref": "#/$defs/PullRequestReference" },
        "analysis_types": { "type": "array", "items": { "type": "string" } }
      },
      "required": ["pr_reference"],
      "additionalProperties": false
    },
    "AnalyzePullRequestOutput": {
      "type": "object",
      "properties": {
        "summary": { "type": "string" },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["summary", "meta"],
      "additionalProperties": false
    },
    "AnalyzePullRequestTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/AnalyzePullRequestInput" },
        "output": { "$ref": "#/$defs/AnalyzePullRequestOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "SuggestReviewCommentsInput": {
      "type": "object",
      "properties": {
        "pr_reference": { "$ref": "#/$defs/PullRequestReference" },
        "focus_areas": { "type": "array", "items": { "type": "string" } },
        "severity_threshold": {
          "type": "string",
          "enum": ["all", "warnings_and_errors", "errors_only"]
        }
      },
      "required": ["pr_reference"],
      "additionalProperties": false
    },
    "SuggestReviewCommentsOutput": {
      "type": "object",
      "properties": {
        "comments": { "type": "array", "items": { "type": "object" } },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["comments", "meta"],
      "additionalProperties": false
    },
    "SuggestReviewCommentsTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/SuggestReviewCommentsInput" },
        "output": { "$ref": "#/$defs/SuggestReviewCommentsOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    },
    "SimilarPastIssuesInput": {
      "type": "object",
      "properties": {
        "query": { "type": "string" },
        "repo_id": { "type": "string" },
        "scope": { "$ref": "#/$defs/ScopeFilter" },
        "pagination": { "$ref": "#/$defs/Pagination" }
      },
      "required": ["query"],
      "additionalProperties": false
    },
    "SimilarPastIssuesOutput": {
      "type": "object",
      "properties": {
        "issues": { "type": "array", "items": { "type": "object" } },
        "meta": { "$ref": "#/$defs/ResponseMeta" }
      },
      "required": ["issues", "meta"],
      "additionalProperties": false
    },
    "GetSimilarPastIssuesTool": {
      "type": "object",
      "properties": {
        "input": { "$ref": "#/$defs/SimilarPastIssuesInput" },
        "output": { "$ref": "#/$defs/SimilarPastIssuesOutput" }
      },
      "required": ["input", "output"],
      "additionalProperties": false
    }
  }
}
